function [mu, sigma] = batch_sim(ec_mags, num_subjects)


%% simulate many subjects

num_clamps = length(ec_mags);
mu = cell(num_clamps,1);
sigma = cell(num_clamps,1);

for mag = num_clamps:-1:1
    
    data_matrix = zeros(num_subjects, 500);
    for subject = 1:num_subjects
        data_matrix(subject,:) = sim_quantal_model(ec_mags(mag));        
    end
    
    %% record mean and standard deviation
    mu{mag} = mean(data_matrix);
    sigma{mag} = std(data_matrix);
    
end


%% plot results

figure
for mag = 1:num_clamps
    shadedErrorBar(1:500, mu{mag}, sigma{mag}, color);
    hold on
end





